<?xml version="1.0" encoding="UTF-8"?>
<!DOCTYPE html [
  <!ENTITY nbsp "&#160;">
]>
<html xmlns="http://www.w3.org/1999/xhtml">
<head>
  <title>CSS Parser Tests</title>
  <link rel="stylesheet" type="text/css" href="styles.css"/>
  <link rel="stylesheet" type="text/css" href="OPS/styles/very-large.css"/>
</head>
<body>

<h1>CSS Parser Test Cases</h1>

<p>This EPUB tests all supported CSS properties with various units and formats. Each section is labeled with the CSS being tested.</p>

<!-- ============================================ -->
<h2>1. TEXT-INDENT TESTS</h2>
<!-- ============================================ -->

<p><b>Test 1.1: text-indent: 0</b></p>
<p class="indent-0">This paragraph has text-indent: 0. It should have NO indentation, not even the fallback EmSpace. The first line should start at the left edge.</p>

<p><b>Test 1.2: text-indent: 0px</b></p>
<p class="indent-0px">This paragraph has text-indent: 0px. Same as above, zero pixels means no indent.</p>

<p><b>Test 1.3: text-indent: 20px</b></p>
<p class="indent-20px">This paragraph has text-indent: 20px. The first line should be indented by 20 pixels from the left edge.</p>

<p><b>Test 1.4: text-indent: 1em</b></p>
<p class="indent-1em">This paragraph has text-indent: 1em. Should be indented by 1 line height (scales with your font size setting).</p>

<p><b>Test 1.5: text-indent: 1.5em</b></p>
<p class="indent-1-5em">This paragraph has text-indent: 1.5em. Should be indented by 1.5 line heights (scales with your font size setting).</p>

<p><b>Test 1.6: text-indent: 2rem</b></p>
<p class="indent-2rem">This paragraph has text-indent: 2rem. Should be indented by 2 line heights (scales with your font size setting).</p>

<p><b>Test 1.7: text-indent: 12pt</b></p>
<p class="indent-12pt">This paragraph has text-indent: 12pt. Should be indented by approximately 16 pixels (12 * 1.33).</p>

<p><b>Test 1.8: text-indent: -10px (negative)</b></p>
<p class="indent-negative">This paragraph has text-indent: -10px. Negative indent - first line may extend left.</p>

<!-- ============================================ -->
<h2>2. TEXT-ALIGN TESTS</h2>
<!-- ============================================ -->

<p><b>Test 2.1: text-align: left</b></p>
<p class="align-left">This paragraph has text-align: left. The text should be aligned to the left edge. Here is some additional text to make the paragraph longer so we can see the alignment effect on multiple lines of text.</p>

<p><b>Test 2.2: text-align: right</b></p>
<p class="align-right">This paragraph has text-align: right. The text should be aligned to the right edge. Here is some additional text to make the paragraph longer so we can see the alignment effect on multiple lines.</p>

<p><b>Test 2.3: text-align: center</b></p>
<p class="align-center">This paragraph has text-align: center. The text should be centered. Here is some additional text to make the paragraph longer so we can see the centering effect.</p>

<p><b>Test 2.4: text-align: justify</b></p>
<p class="align-justify">This paragraph has text-align: justify. The text should be justified with even spacing between words. Here is some additional text to make the paragraph longer so we can see the justification effect on multiple lines of text in the paragraph.</p>

<p><b>Test 2.5: text-align: start</b></p>
<p class="align-start">This paragraph has text-align: start. Should behave like left for LTR text.</p>

<p><b>Test 2.6: text-align: end</b></p>
<p class="align-end">This paragraph has text-align: end. Should behave like right for LTR text.</p>

<!-- ============================================ -->
<h2>3. FONT-STYLE TESTS</h2>
<!-- ============================================ -->

<p><b>Test 3.1: font-style: normal</b></p>
<p class="font-normal">This paragraph has font-style: normal. Text should appear in regular upright style.</p>

<p><b>Test 3.2: font-style: italic</b></p>
<p class="font-italic">This paragraph has font-style: italic. Text should appear in italic style.</p>

<p><b>Test 3.3: font-style: oblique</b></p>
<p class="font-oblique">This paragraph has font-style: oblique. Should render as italic.</p>

<!-- ============================================ -->
<h2>4. FONT-WEIGHT TESTS</h2>
<!-- ============================================ -->

<p><b>Test 4.1: font-weight: normal</b></p>
<p class="weight-normal">This paragraph has font-weight: normal. Text should appear in regular weight.</p>

<p><b>Test 4.2: font-weight: bold</b></p>
<p class="weight-bold">This paragraph has font-weight: bold. Text should appear in bold.</p>

<p><b>Test 4.3: font-weight: bolder</b></p>
<p class="weight-bolder">This paragraph has font-weight: bolder. Should render as bold.</p>

<p><b>Test 4.4: font-weight: lighter</b></p>
<p class="weight-lighter">This paragraph has font-weight: lighter. Should render as normal.</p>

<p><b>Test 4.5: font-weight: 400</b></p>
<p class="weight-400">This paragraph has font-weight: 400. Should render as normal (400 = normal).</p>

<p><b>Test 4.6: font-weight: 700</b></p>
<p class="weight-700">This paragraph has font-weight: 700. Should render as bold (700 = bold).</p>

<p><b>Test 4.7: font-weight: 900</b></p>
<p class="weight-900">This paragraph has font-weight: 900. Should render as bold (900 &gt;= 700).</p>

<!-- ============================================ -->
<h2>5. TEXT-DECORATION TESTS</h2>
<!-- ============================================ -->

<p><b>Test 5.1: text-decoration: none</b></p>
<p class="decoration-none">This paragraph has text-decoration: none. No underline should appear.</p>

<p><b>Test 5.2: text-decoration: underline</b></p>
<p class="decoration-underline">This paragraph has text-decoration: underline. Text should be underlined.</p>

<p><b>Test 5.3: text-decoration-line: underline</b></p>
<p class="decoration-line-underline">This paragraph has text-decoration-line: underline. Should also be underlined.</p>

<!-- ============================================ -->
<h2>6. MARGIN-TOP TESTS (Individual Property)</h2>
<!-- ============================================ -->

<p><b>Test 6.1: margin-top: 0</b></p>
<p class="margin-top-0">This paragraph has margin-top: 0. No extra space above.</p>

<p><b>Test 6.2: margin-top: 10px</b></p>
<p class="margin-top-10px">This paragraph has margin-top: 10px. Should have 10px space above.</p>

<p><b>Test 6.3: margin-top: 20px</b></p>
<p class="margin-top-20px">This paragraph has margin-top: 20px. Should have 20px space above.</p>

<p><b>Test 6.4: margin-top: 1em</b></p>
<p class="margin-top-1em">This paragraph has margin-top: 1em. Should have 1 line height of space above (scales with font size).</p>

<p><b>Test 6.5: margin-top: 2em</b></p>
<p class="margin-top-2em">This paragraph has margin-top: 2em. Should have 2 line heights of space above (scales with font size).</p>

<p><b>Test 6.6: margin-top: 1rem</b></p>
<p class="margin-top-1rem">This paragraph has margin-top: 1rem. Should have 1 line height of space above (scales with font size).</p>

<p><b>Test 6.7: margin-top: 12pt</b></p>
<p class="margin-top-12pt">This paragraph has margin-top: 12pt. Should have ~16px space above.</p>

<!-- ============================================ -->
<h2>7. MARGIN-BOTTOM TESTS (Individual Property)</h2>
<!-- ============================================ -->

<p><b>Test 7.1: margin-bottom: 0</b></p>
<p class="margin-bottom-0">This paragraph has margin-bottom: 0. No extra space below.</p>

<p><b>Test 7.2: margin-bottom: 10px</b></p>
<p class="margin-bottom-10px">This paragraph has margin-bottom: 10px. Should have 10px space below.</p>

<p><b>Test 7.3: margin-bottom: 1em</b></p>
<p class="margin-bottom-1em">This paragraph has margin-bottom: 1em. Should have 1 line height of space below (scales with font size).</p>

<p>This is a normal paragraph after the margin-bottom tests.</p>

<!-- ============================================ -->
<h2>8. MARGIN-LEFT TESTS (Individual Property)</h2>
<!-- ============================================ -->

<p><b>Test 8.1: margin-left: 0</b></p>
<p class="margin-left-0">This paragraph has margin-left: 0. Should start at the left edge.</p>

<p><b>Test 8.2: margin-left: 20px</b></p>
<p class="margin-left-20px">This paragraph has margin-left: 20px. Should be indented 20px from left. This is a longer paragraph to show how the entire block is shifted, not just the first line.</p>

<p><b>Test 8.3: margin-left: 40px</b></p>
<p class="margin-left-40px">This paragraph has margin-left: 40px. Should be indented 40px from left. More text to demonstrate the block-level indentation.</p>

<p><b>Test 8.4: margin-left: 2em</b></p>
<p class="margin-left-2em">This paragraph has margin-left: 2em. Should be indented 2 line heights from left (scales with font size).</p>

<!-- ============================================ -->
<h2>9. MARGIN-RIGHT TESTS (Individual Property)</h2>
<!-- ============================================ -->

<p><b>Test 9.1: margin-right: 0</b></p>
<p class="margin-right-0">This paragraph has margin-right: 0. Should extend to the right edge. Here is additional text to fill the line and show the margin effect.</p>

<p><b>Test 9.2: margin-right: 20px</b></p>
<p class="margin-right-20px">This paragraph has margin-right: 20px. Text should stop 20px before the right edge. Adding more text to demonstrate this effect clearly.</p>

<p><b>Test 9.3: margin-right: 2em</b></p>
<p class="margin-right-2em">This paragraph has margin-right: 2em. Text should stop 2 line heights before the right edge (scales with font size).</p>

<!-- ============================================ -->
<h2>10. MARGIN SHORTHAND TESTS</h2>
<!-- ============================================ -->

<p><b>Test 10.1: margin: 10px (1 value - all sides)</b></p>
<p class="margin-1val-10px">This paragraph has margin: 10px. All four sides should have 10px margin. The text block is inset from all edges.</p>

<p><b>Test 10.2: margin: 1em (1 value - all sides)</b></p>
<p class="margin-1val-1em">This paragraph has margin: 1em. All four sides should have 1 line height of margin (scales with font size).</p>

<p><b>Test 10.3: margin: 10px 20px (2 values - vertical | horizontal)</b></p>
<p class="margin-2val-10px-20px">This paragraph has margin: 10px 20px. Top/bottom: 10px, left/right: 20px. Notice the horizontal inset is larger than vertical.</p>

<p><b>Test 10.4: margin: 1em 2em (2 values)</b></p>
<p class="margin-2val-1em-2em">This paragraph has margin: 1em 2em. Top/bottom: 1 line height, left/right: 2 line heights (scales with font size).</p>

<p><b>Test 10.5: margin: 10px 20px 30px (3 values - top | horizontal | bottom)</b></p>
<p class="margin-3val-10px-20px-30px">This paragraph has margin: 10px 20px 30px. Top: 10px, left/right: 20px, bottom: 30px.</p>

<p><b>Test 10.6: margin: 10px 20px 30px 40px (4 values - top | right | bottom | left)</b></p>
<p class="margin-4val-10px-20px-30px-40px">This paragraph has margin: 10px 20px 30px 40px. Top: 10px, right: 20px, bottom: 30px, left: 40px. Note the asymmetric appearance.</p>

<p><b>Test 10.7: margin: 5px 1em 10px 2em (4 values - mixed units)</b></p>
<p class="margin-4val-mixed">This paragraph has margin: 5px 1em 10px 2em. Mixed pixel and em units in a single shorthand.</p>

<p><b>Test 10.8: margin: 30px 0px 0 0 (4 values - zeros with/without units)</b></p>
<p class="margin-4val-zeros">This paragraph has margin: 30px 0px 0 0. Tests parsing zeros with and without units. Only top margin (30px) should be visible.</p>

<p><b>Test 10.9: margin: 0 20px 0 20px (4 values - alternating zeros)</b></p>
<p class="margin-4val-zero-mix">This paragraph has margin: 0 20px 0 20px. No vertical margin, 20px horizontal margin on both sides.</p>

<!-- ============================================ -->
<h2>11. PADDING-TOP TESTS (Individual Property)</h2>
<!-- ============================================ -->

<p><b>Test 11.1: padding-top: 0</b></p>
<p class="padding-top-0">This paragraph has padding-top: 0. No extra space above.</p>

<p><b>Test 11.2: padding-top: 10px</b></p>
<p class="padding-top-10px">This paragraph has padding-top: 10px. Should have 10px space above.</p>

<p><b>Test 11.3: padding-top: 1em</b></p>
<p class="padding-top-1em">This paragraph has padding-top: 1em. Should have 1 line height of space above (scales with font size).</p>

<!-- ============================================ -->
<h2>12. PADDING-BOTTOM TESTS (Individual Property)</h2>
<!-- ============================================ -->

<p><b>Test 12.1: padding-bottom: 0</b></p>
<p class="padding-bottom-0">This paragraph has padding-bottom: 0. No extra space below.</p>

<p><b>Test 12.2: padding-bottom: 10px</b></p>
<p class="padding-bottom-10px">This paragraph has padding-bottom: 10px. Should have 10px space below.</p>

<p>Normal paragraph after padding-bottom tests.</p>

<!-- ============================================ -->
<h2>13. PADDING-LEFT TESTS (Individual Property)</h2>
<!-- ============================================ -->

<p><b>Test 13.1: padding-left: 0</b></p>
<p class="padding-left-0">This paragraph has padding-left: 0. Should start at the left edge.</p>

<p><b>Test 13.2: padding-left: 20px</b></p>
<p class="padding-left-20px">This paragraph has padding-left: 20px. Entire block should be indented 20px from left.</p>

<p><b>Test 13.3: padding-left: 2em</b></p>
<p class="padding-left-2em">This paragraph has padding-left: 2em. Entire block should be indented 2 line heights from left (scales with font size).</p>

<!-- ============================================ -->
<h2>14. PADDING-RIGHT TESTS (Individual Property)</h2>
<!-- ============================================ -->

<p><b>Test 14.1: padding-right: 0</b></p>
<p class="padding-right-0">This paragraph has padding-right: 0. Should extend to the right edge.</p>

<p><b>Test 14.2: padding-right: 20px</b></p>
<p class="padding-right-20px">This paragraph has padding-right: 20px. Text should stop 20px before right edge. More text to fill the line.</p>

<!-- ============================================ -->
<h2>15. PADDING SHORTHAND TESTS</h2>
<!-- ============================================ -->

<p><b>Test 15.1: padding: 10px (1 value)</b></p>
<p class="padding-1val-10px">This paragraph has padding: 10px. All sides get 10px padding. The text block is inset from all edges.</p>

<p><b>Test 15.2: padding: 10px 20px (2 values)</b></p>
<p class="padding-2val-10px-20px">This paragraph has padding: 10px 20px. Top/bottom: 10px, left/right: 20px.</p>

<p><b>Test 15.3: padding: 5px 15px 25px (3 values)</b></p>
<p class="padding-3val-5px-15px-25px">This paragraph has padding: 5px 15px 25px. Top: 5px, left/right: 15px, bottom: 25px.</p>

<p><b>Test 15.4: padding: 5px 10px 15px 20px (4 values)</b></p>
<p class="padding-4val-5px-10px-15px-20px">This paragraph has padding: 5px 10px 15px 20px. Top: 5px, right: 10px, bottom: 15px, left: 20px.</p>

<!-- ============================================ -->
<h2>16. COMBINED PROPERTY TESTS</h2>
<!-- ============================================ -->

<p><b>Test 16.1: text-indent + text-align combined</b></p>
<p class="combined-indent-align">This paragraph has text-indent: 2em and text-align: justify. The first line should be indented and all text should be justified. Here is more text to demonstrate both effects working together in a single paragraph.</p>

<p><b>Test 16.2: margin + padding combined</b></p>
<p class="combined-margin-padding">This paragraph has margin: 10px 20px and padding: 5px 15px. Both margins and padding affect the positioning. The total horizontal inset should be margin + padding on each side.</p>

<p><b>Test 16.3: All properties combined</b></p>
<p class="combined-all">This paragraph has text-indent: 1em, text-align: left, font-style: italic, font-weight: bold, margin: 10px 30px, and padding: 5px 20px. Multiple CSS properties working together.</p>

<!-- ============================================ -->
<h2>17. ELEMENT SELECTOR TEST</h2>
<!-- ============================================ -->

<p><b>Test 17.1: blockquote element styling</b></p>
<blockquote>This is a blockquote element. It should have margin-left: 30px, margin-right: 30px, and font-style: italic applied via element selector (not class).</blockquote>

<!-- ============================================ -->
<h2>18. NESTED BLOCK ELEMENT TESTS</h2>
<!-- ============================================ -->

<p><b>Test 18.1: Nested div with margin-bottom wrapping h3</b></p>
<p>The following heading is inside a div with margin-bottom: 2em. The h3 has margin-bottom: 0. The div's margin should still apply.</p>
<div class="nested-div-margin">
  <h3 class="nested-h3-no-margin">Heading inside div</h3>
</div>
<p>This paragraph should have extra space above it (from the div's margin-bottom: 2em).</p>

<p><b>Test 18.2: Nested div with margin-left wrapping paragraph</b></p>
<div class="nested-div-margin-left">
  <p class="nested-p-margin-left">This paragraph is inside a div with margin-left: 20px. The paragraph itself has margin-left: 15px. Total indent should be 35px.</p>
</div>

<p><b>Test 18.3: Double-nested divs with margins</b></p>
<div class="nested-outer">
  <div class="nested-inner">
    <p class="nested-content">This text is inside two nested divs. Outer has margin-left: 15px, inner has margin-left: 15px. Total should be 30px indent.</p>
  </div>
</div>

<!-- ============================================ -->
<h2>19. EDGE CASE TESTS</h2>
<!-- ============================================ -->

<p><b>Test 19.1: Decimal pixel values</b></p>
<p class="edge-decimal-px">This paragraph has margin-top: 10.5px and text-indent: 15.75px. Tests decimal/fractional pixel values.</p>

<p><b>Test 19.2: Large margin values</b></p>
<p class="edge-large-values">This paragraph has margin-left: 100px and margin-right: 100px. Tests large inset values - text should be significantly narrower.</p>

<p><b>Test 19.3: All zeros</b></p>
<p class="edge-all-zeros">This paragraph has margin: 0 0 0 0, padding: 0 0 0 0, text-indent: 0. All spacing explicitly set to zero.</p>

<!-- ============================================ -->
<h2>20. PUNCTUATION ATTACHMENT TESTS</h2>
<!-- ============================================ -->

<p>These tests verify that punctuation attaches correctly to the preceding word when inline styles end.</p>

<p><b>Test 20.1: Period after italic span</b></p>
<p>The word <span class="font-italic">italic</span>. should have the period directly after it with no space.</p>

<p><b>Test 20.2: Comma after bold span</b></p>
<p>The word <span class="weight-bold">bold</span>, followed by more text, should have no space before the comma.</p>

<p><b>Test 20.3: Multiple punctuation marks</b></p>
<p>An <span class="font-italic">exclamation</span>! And a <span class="weight-bold">question</span>? Both should attach properly.</p>

<p><b>Test 20.4: Closing quote after styled text</b></p>
<p>She said "<span class="font-italic">hello</span>" to everyone. The closing quote should attach to "hello".</p>

<p><b>Test 20.5: Semicolon and colon</b></p>
<p>A <span class="weight-bold">list</span>: item one; <span class="font-italic">item two</span>; item three. Colons and semicolons should attach.</p>

<p><b>Test 20.6: Closing parenthesis and bracket</b></p>
<p>See the reference (<span class="font-italic">Smith, 2024</span>) and the index [<span class="weight-bold">page 42</span>] for details.</p>

<p><b>Test 20.7: Justified text with punctuation</b></p>
<p class="align-justify">This is a longer paragraph with <span class="font-italic">styled text</span>, and it has punctuation after inline styles. The justification should still work correctly, distributing space evenly between actual words while keeping punctuation attached. Here is more text to ensure the line wraps and justification is visible.</p>

<!-- ============================================ -->
<h2>21. INLINE ELEMENT CONTINUATION TESTS</h2>
<!-- ============================================ -->

<p>These tests verify that inline HTML elements do not introduce spurious spaces. Word fragments split by inline styling should render as a single visual word with zero spacing between fragments.</p>

<h3>21A. Mid-Word Styling (startElement flush)</h3>

<p><b>Test 21.1: Mid-word italic — fan&lt;em&gt;tas&lt;/em&gt;tic</b></p>
<p>The word fan<em>tas</em>tic should render as one word with "tas" in italic. No spaces between "fan", "tas", and "tic".</p>

<p><b>Test 21.2: Mid-word bold — un&lt;b&gt;believ&lt;/b&gt;able</b></p>
<p>The word un<b>believ</b>able should render as one word with "believ" in bold. No spaces between fragments.</p>

<p><b>Test 21.3: Mid-word underline — extra&lt;u&gt;ordi&lt;/u&gt;nary</b></p>
<p>The word extra<u>ordi</u>nary should render as one word with "ordi" underlined. No spaces between fragments.</p>

<p><b>Test 21.4: Mid-word CSS italic span — in&lt;span class=italic&gt;cred&lt;/span&gt;ible</b></p>
<p>The word in<span class="font-italic">cred</span>ible should render as one word with "cred" in italic. No spaces between fragments.</p>

<h3>21B. Punctuation After Styled Text (endElement continuation)</h3>

<p><b>Test 21.5: Comma directly after em — do&lt;em&gt;,&lt;/em&gt;</b></p>
<p>Here we do<em>,</em> don't we? The comma after "do" should attach directly with no space.</p>

<p><b>Test 21.6: Period directly after bold — end&lt;b&gt;.&lt;/b&gt;</b></p>
<p>This sentence has a styled end<b>.</b> The period should attach to "end" with no space.</p>

<p><b>Test 21.7: Exclamation after italic — wow&lt;em&gt;!&lt;/em&gt;</b></p>
<p>That was wow<em>!</em> The exclamation should attach to "wow" with no space.</p>

<h3>21C. Consecutive Inline Elements (chained continuations)</h3>

<p><b>Test 21.8: Bold then italic no space — &lt;b&gt;bold&lt;/b&gt;&lt;em&gt;italic&lt;/em&gt;</b></p>
<p>The compound <b>bold</b><em>italic</em> should render as one word "bolditalic" with bold then italic, no space between them.</p>

<p><b>Test 21.9: Three styles chained — &lt;b&gt;A&lt;/b&gt;&lt;em&gt;B&lt;/em&gt;&lt;u&gt;C&lt;/u&gt;</b></p>
<p>The letters <b>A</b><em>B</em><u>C</u> should render as "ABC" with no spaces, each letter in its own style.</p>

<p><b>Test 21.10: Styled punctuation chain — do&lt;em&gt;,&lt;/em&gt;&lt;b&gt;!&lt;/b&gt;</b></p>
<p>Multiple punctuation: do<em>,</em><b>!</b> next word. "do,!" should have no internal spaces.</p>

<h3>21D. Space Boundaries (continuation reset)</h3>

<p><b>Test 21.11: Space between styled words — &lt;em&gt;first&lt;/em&gt; &lt;b&gt;second&lt;/b&gt;</b></p>
<p>Two styled words: <em>first</em> <b>second</b> should have normal space between them. They are separate words.</p>

<p><b>Test 21.12: Space before styled continuation — word &lt;em&gt;styled&lt;/em&gt;next</b></p>
<p>Here is word <em>styled</em>next as a test. "word" is separate, but "styled" and "next" should attach (no space between them).</p>

<p><b>Test 21.13: Styled text with space after — &lt;em&gt;styled&lt;/em&gt; next</b></p>
<p>Here is <em>styled</em> next as a test. "styled" and "next" should have a normal space between them.</p>

<h3>21E. Nested Inline Elements</h3>

<p><b>Test 21.14: Nested bold inside italic — &lt;em&gt;ital&lt;b&gt;bold&lt;/b&gt;ital&lt;/em&gt;</b></p>
<p>The word <em>ital<b>bold</b>ital</em> should render as one word "italboldital" with the middle portion in bold+italic.</p>

<p><b>Test 21.15: Nested span inside em — &lt;em&gt;soft&lt;span class=bold&gt;hard&lt;/span&gt;soft&lt;/em&gt;</b></p>
<p>The word <em>soft<span class="weight-bold">hard</span>soft</em> should render as "softhardsoft" with no spaces.</p>

<h3>21F. Justified Text Stress Test</h3>

<p><b>Test 21.16: Justified paragraph with many inline continuations</b></p>
<p class="align-justify">In this justified paragraph, every in<em>line</em> element should pro<b>duce</b> correct word bound<em>aries</em> without spurious spaces. The word "inline" should appear as one word, "produce" as one word, and "boundaries" as one word. Justification should distribute space only between actual words, not between word fragments that belong together. This sentence has enough text to wrap onto multiple lines so the justification effect is clearly visible and we can verify that extra<u>ordi</u>nary spacing is not introduced by the inline elements.</p>

<h3>21G. Real-World Patterns</h3>

<p><b>Test 21.17: Book-style dialogue with styled attribution</b></p>
<p>"I don't think so<em>,</em>" she said<em>.</em> "Not today<em>.</em>"</p>

<p><b>Test 21.18: Possessive after styled word</b></p>
<p>It was <em>Shakespeare</em>'s greatest work. The apostrophe-s should attach to "Shakespeare".</p>

<p><b>Test 21.19: Hyphenated compound with mid-style</b></p>
<p>The <b>well</b>-known author wrote a <em>best</em>-selling novel. Hyphens should attach to surrounding fragments.</p>

<p><b>Test 21.20: Contraction spanning inline element</b></p>
<p>I <em>can</em>'t believe it<em>!</em> The "'t" should attach to "can" and "!" should attach to "it".</p>

<!-- ============================================ -->
<h2>22. PERCENTAGE UNIT TESTS</h2>
<!-- ============================================ -->

<p>These tests verify that CSS percentage units resolve correctly against the viewport width. On a 600px viewport, 5% = 30px, 10% = 60px.</p>

<h3>22A. Text-Indent Percentage</h3>

<p><b>Test 22.1: text-indent: 5%</b></p>
<p class="indent-5pct">This paragraph has text-indent: 5%. The first line should be indented by 5% of the viewport width (e.g. ~30px on a 600px display). This is the most common percentage indent found in EPUBs. Previously this rendered as only 5px (nearly invisible).</p>

<p><b>Test 22.2: text-indent: 10%</b></p>
<p class="indent-10pct">This paragraph has text-indent: 10%. The first line should be indented by 10% of the viewport width (e.g. ~60px on a 600px display). This should be noticeably wider than the 5% test above.</p>

<p><b>Test 22.3: text-indent: 0%</b></p>
<p class="indent-0pct">This paragraph has text-indent: 0%. Zero percent should resolve to 0px and suppress the EmSpace fallback indent. The first line should start flush at the left edge, same as text-indent: 0.</p>

<p><b>Test 22.4: text-indent: 2.5%</b></p>
<p class="indent-2-5pct">This paragraph has text-indent: 2.5%. Fractional percentage value. Should be ~15px on a 600px viewport. Tests decimal percentage parsing.</p>

<h3>22B. Margin Percentage</h3>

<p><b>Test 22.5: margin-left: 5%</b></p>
<p class="margin-left-5pct">This paragraph has margin-left: 5%. The entire block should be inset from the left by 5% of viewport width (~30px on 600px). All lines should be shifted, not just the first.</p>

<p><b>Test 22.6: margin-right: 5%</b></p>
<p class="margin-right-5pct">This paragraph has margin-right: 5%. Text should stop 5% before the right edge. Adding more text to make multiple lines so the right margin effect is visible on wrapped lines.</p>

<p><b>Test 22.7: margin-left: 10%</b></p>
<p class="margin-left-10pct">This paragraph has margin-left: 10%. Should be inset from the left by 10% of viewport width (~60px on 600px). Wider than the 5% test above.</p>

<p><b>Test 22.8: margin-top: 5%</b></p>
<p class="margin-top-5pct">This paragraph has margin-top: 5%. Should have 5% of viewport width as top spacing (~30px on 600px). Note: per CSS spec, vertical margins resolve against width, not height.</p>

<p><b>Test 22.9: margin-bottom: 5%</b></p>
<p class="margin-bottom-5pct">This paragraph has margin-bottom: 5%. Should have 5% of viewport width as bottom spacing.</p>
<p>This paragraph follows the margin-bottom: 5% test. The gap above should be ~30px on a 600px viewport.</p>

<p><b>Test 22.10: margin-left: 10% + margin-right: 10%</b></p>
<p class="margin-lr-10pct">This paragraph has both margin-left and margin-right set to 10%. The text block should be 20% narrower total — inset by 10% on each side. Adding more text to make the narrowing effect clearly visible across multiple lines.</p>

<h3>22C. Padding Percentage</h3>

<p><b>Test 22.11: padding-left: 5%</b></p>
<p class="padding-left-5pct">This paragraph has padding-left: 5%. The entire block should be inset from the left by 5% of viewport width (~30px on 600px), same visual effect as margin-left: 5%.</p>

<p><b>Test 22.12: padding-right: 5%</b></p>
<p class="padding-right-5pct">This paragraph has padding-right: 5%. Text should stop 5% before the right edge. More text to show the effect on multiple lines clearly.</p>

<p><b>Test 22.13: padding-left: 10% + padding-right: 10%</b></p>
<p class="padding-lr-10pct">This paragraph has both padding-left and padding-right set to 10%. The text block should be 20% narrower total. Adding more text to make the effect clearly visible.</p>

<h3>22D. Percentage Shorthand</h3>

<p><b>Test 22.14: margin: 10px 5% (shorthand with mixed units)</b></p>
<p class="margin-2val-10px-5pct">This paragraph has margin: 10px 5%. Top/bottom margins are 10px (absolute), left/right margins are 5% of viewport width. Tests mixed units in shorthand.</p>

<p><b>Test 22.15: padding: 0 5% (shorthand with percentage)</b></p>
<p class="padding-2val-0-5pct">This paragraph has padding: 0 5%. No vertical padding, 5% horizontal padding on each side. Tests percentage in padding shorthand.</p>

<h3>22E. Combined Percentage Properties</h3>

<p><b>Test 22.16: text-indent: 5% + margin-left: 10% + margin-right: 10%</b></p>
<p class="pct-indent-margin">This paragraph has text-indent: 5%, margin-left: 10%, and margin-right: 10%. The text block is narrowed by 20%, and the first line has an additional 5% indent. This is a common EPUB pattern. Adding more text to fill multiple lines so both the margin narrowing and first-line indent are clearly visible.</p>

<h3>22F. Comparison: Percentage vs Absolute vs EmSpace</h3>

<p><b>Test 22.17: Comparison — no CSS indent (EmSpace fallback)</b></p>
<p>This paragraph has no text-indent CSS. It should display the default EmSpace character indent. Compare the indent size with the percentage tests above.</p>

<p><b>Test 22.18: Comparison — text-indent: 20px (absolute)</b></p>
<p class="indent-20px">This paragraph has text-indent: 20px (absolute pixels). Compare with text-indent: 5% above. On a 600px viewport, 5% (30px) should be slightly wider than this 20px indent.</p>

<p><b>Test 22.19: Comparison — text-indent: 1em (relative to font)</b></p>
<p class="indent-1em">This paragraph has text-indent: 1em (relative to font size). Compare with percentage indents above. The em-based indent scales with font size, while percentage indents scale with viewport width.</p>

<!-- ============================================ -->
<h2>23. NON-BREAKING SPACE (NBSP) TESTS</h2>
<!-- ============================================ -->

<p>These tests verify that non-breaking space characters (U+00A0, &amp;nbsp;) are treated as word separators. The nbsp character should render as a visible space between words, not merge them together. See issue #743.</p>

<h3>23A. Basic NBSP Word Separation</h3>

<p><b>Test 23.1: Simple nbsp between two words</b></p>
<p>The words "hello&nbsp;world" use an nbsp between them. They should appear as "hello world" with a visible space, not "helloworld".</p>

<p><b>Test 23.2: Single-character word + nbsp + word (Polish preposition pattern)</b></p>
<p>Polish text: w&nbsp;domu means "at home". The "w" and "domu" should be separate words with a space between them.</p>

<p><b>Test 23.3: Multiple nbsp-separated prepositions</b></p>
<p>Polish text: i&nbsp;w&nbsp;miejscu means "and in place". All three words should be visually separated: "i w miejscu", not "iwmiejscu".</p>

<p><b>Test 23.4: nbsp between longer words</b></p>
<p>The phrase "Christopher&nbsp;Columbus" uses nbsp. It should render as "Christopher Columbus" with a normal space.</p>

<h3>23B. NBSP with Inline Styling</h3>

<p><b>Test 23.5: nbsp after styled word</b></p>
<p>The word <b>bold</b>&nbsp;followed by a regular word. The bold word and the following word should be separated by a space.</p>

<p><b>Test 23.6: nbsp before styled word</b></p>
<p>A regular word&nbsp;<em>italic</em> after an nbsp. The words should be separated by a space.</p>

<p><b>Test 23.7: nbsp between two styled words</b></p>
<p><b>first</b>&nbsp;<em>second</em> — the bold and italic words should have a visible space between them.</p>

<h3>23C. NBSP in Justified Text</h3>

<p><b>Test 23.8: Justified paragraph with nbsp-separated words</b></p>
<p class="align-justify">This justified paragraph contains words separated by nbsp: z&nbsp;nami i&nbsp;w&nbsp;domu. The prepositions "z", "i", and "w" should all appear as separate words with visible spaces. The justification algorithm should distribute space normally between all words including those separated by nbsp. Adding more text to ensure the paragraph wraps across multiple lines so justification is clearly visible.</p>

<h3>23D. NBSP Entity Variants</h3>

<p><b>Test 23.9: Numeric character reference &#38;#160;</b></p>
<p>Words&#160;separated&#160;by&#160;numeric&#160;nbsp references. Each word should be visually separated.</p>

<p><b>Test 23.10: Hex character reference &#38;#xA0;</b></p>
<p>Words&#xA0;separated&#xA0;by&#xA0;hex&#xA0;nbsp references. Each word should be visually separated.</p>

<h3>23E. NBSP Edge Cases</h3>

<p><b>Test 23.11: Multiple consecutive nbsp characters</b></p>
<p>Double&nbsp;&nbsp;space between words. Should show a wider gap (two spaces worth).</p>

<p><b>Test 23.12: nbsp at start of paragraph</b></p>
<p>&nbsp;This paragraph starts with an nbsp. It should not cause any rendering issues.</p>

<p><b>Test 23.13: nbsp mixed with regular spaces</b></p>
<p>Regular space then w&nbsp;domu then regular space. The nbsp between "w" and "domu" should render the same as a regular space visually.</p>

<p><b>Test 23.14: Long paragraph with many nbsp occurrences</b></p>
<p>W&nbsp;polskim&nbsp;języku, krótkie przyimki takie jak "w", "z", "i" często łączą się z&nbsp;następnym słowem za&nbsp;pomocą nbsp.&nbsp;Ten akapit testuje wiele wystąpień nbsp w&nbsp;dłuższym tekście, aby upewnić się, że wszystkie słowa są&nbsp;prawidłowo oddzielone i&nbsp;tekst jest czytelny.</p>

<!-- ============================================ -->
<h2>24. VERY-LARGE.CSS TESTS</h2>
<!-- ============================================ -->

<p class="iiocdmnkhnkklgcljnokmnejljmfli">Test 24.1: paragraph using class iiocdmnkhnkklgcljnokmnejljmfli from very-large.css.</p>
<p>Test 24.2: inline <span class="klmfjabcehdiifhpldjllheehgkjikca">span class klmfjabcehdiifhpldjllheehgkjikca</span> from very-large.css.</p>
<h3 class="nbagljikcgnenobgkeffncclmmdmajkg">Test 24.3: heading with class nbagljikcgnenobgkeffncclmmdmajkg from very-large.css.</h3>
<p class="nglhpcfhlijgmcceclbjjcgc">Test 24.4: paragraph with class nglhpcfhlijgmcceclbjjcgc from very-large.css.</p>
<p class="iljkcpodhipmkcnndckjcfobkpekg">Test 24.5: paragraph using class iljkcpodhipmkcnndckjcfobkpekg from very-large.css.</p>
<p>Test 24.6: inline <span class="jccncahjnfcdcldecmbbooohaeoakccpgo">span class jccncahjnfcdcldecmbbooohaeoakccpgo</span> from very-large.css.</p>
<h3 class="kbjekgdigbdloocbldihikfpiacbn">Test 24.7: heading with class kbjekgdigbdloocbldihikfpiacbn from very-large.css.</h3>
<p class="nnkdolbfcplfmndkhkok">Test 24.8: paragraph with class nnkdolbfcplfmndkhkok from very-large.css.</p>
<p class="cmkbgbeapedilglifbfi">Test 24.9: paragraph using class cmkbgbeapedilglifbfi from very-large.css.</p>
<p>Test 24.10: inline <span class="bjoa">span class bjoa</span> from very-large.css.</p>
<h3 class="fbdghpjkhjfaggcmcpnpcgljgmohjnjcmkjp">Test 24.11: heading with class fbdghpjkhjfaggcmcpnpcgljgmohjnjcmkjp from very-large.css.</h3>
<p class="fkakmhhfejdfldndclbflhgipahfolamo">Test 24.12: paragraph with class fkakmhhfejdfldndclbflhgipahfolamo from very-large.css.</p>
<p class="dijffnlccmnjmcef">Test 24.13: paragraph using class dijffnlccmnjmcef from very-large.css.</p>
<p>Test 24.14: inline <span class="pidpdeehcigka">span class pidpdeehcigka</span> from very-large.css.</p>
<h3 class="mkdbdhpaokbclkikcokce">Test 24.15: heading with class mkdbdhpaokbclkikcokce from very-large.css.</h3>
<p class="badhpehaipendmcmjemdoioc">Test 24.16: paragraph with class badhpehaipendmcmjemdoioc from very-large.css.</p>
<p class="jbciahmilebacjddgipdphecfhgbfbj">Test 24.17: paragraph using class jbciahmilebacjddgipdphecfhgbfbj from very-large.css.</p>
<p>Test 24.18: inline <span class="gggjkiolmgjfgbobnifdoknllajhpiipc">span class gggjkiolmgjfgbobnifdoknllajhpiipc</span> from very-large.css.</p>
<h3 class="asdasdasdf">Test 24.19: heading with class asdasdasdf from very-large.css.</h3>
<p class="kafmkeklcbgjkdjefeafmnodbkpoccl">Test 24.20: paragraph with class kafmkeklcbgjkdjefeafmnodbkpoccl from very-large.css.</p>

<!-- ============================================ -->
<h2>END OF TESTS</h2>
<!-- ============================================ -->

<p>If you've reached this point, all CSS test cases have been rendered. Compare each section against the expected behavior described in the test labels.</p>

</body>
</html>
